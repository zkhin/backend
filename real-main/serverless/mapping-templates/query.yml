- type: Query
  field: self
  request: Query.self/before.request.vtl
  response: Query.self/after.response.vtl
  kind: PIPELINE
  functions:
    - Users.batchGet

- type: Query
  field: user
  request: Query.user/before.request.vtl
  response: Query.user/after.response.vtl
  kind: PIPELINE
  functions:
    - Users.batchGet
    - Users.batchGet.blockerStatus
    - Users.batchGet.followedStatus

- type: Query
  field: searchUsers
  dataSource: ElasticSearchDataSource

- type: Query
  field: trendingUsers
  dataSource: DynamodbDataSource

- type: Query
  field: findUsers
  kind: PIPELINE
  request: Query.findUsers/before.request.vtl
  response: Query.findUsers/after.response.vtl
  functions:
    - Query.findUsers.batchGetByEmail
    - Query.findUsers.batchGetByPhoneNumber

- type: Query
  field: post
  request: Query.post/before.request.vtl
  response: Query.post/after.response.vtl
  kind: PIPELINE
  functions:
    - Posts.batchGet
    - Posts.filterBy.postStatus
    - Users.beginPipeline
    - Users.batchGet
    - Users.batchGet.blockerStatus
    - Users.filterBy.blockerStatus
    - Users.batchGet.followedStatus
    - Users.filterBy.followedStatus
    - Users.endPipeline

- type: Query
  field: trendingPosts
  dataSource: DynamodbDataSource

- type: Query
  field: album
  request: Query.album/before.request.vtl
  response: Query.album/after.response.vtl
  kind: PIPELINE
  functions:
    - Albums.batchGet
    - Users.beginPipeline
    - Users.batchGet
    - Users.batchGet.blockerStatus
    - Users.filterBy.blockerStatus
    - Users.batchGet.followedStatus
    - Users.filterBy.followedStatus
    - Users.endPipeline

- type: Query
  field: chat
  request: Query.chat/before.request.vtl
  response: Query.chat/after.response.vtl
  kind: PIPELINE
  functions:
    - ChatMemberships.batchGet
    - Query.chat.transform
    - Chats.batchGet

- type: Query
  field: potentialMatches
  kind: PIPELINE
  request: Query.potentialMatches/before.request.vtl
  response: Query.potentialMatches/after.response.vtl
  functions:
    - Users.batchGet
